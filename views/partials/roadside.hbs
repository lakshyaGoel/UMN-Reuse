<script>
function proceed () {
    var form = document.createElement('form');
    form.setAttribute('method', 'post');
    form.setAttribute('action', 'add/roadside');
    form.style.display = 'hidden';
    document.body.appendChild(form)
    form.submit();
}
</script>

<p>
	<div class="rows">
		<div class="row first-row">
			<button class="button is-primary" id="popUpButton" onclick="document.getElementById('popUpFormRS').style.display='block'">
				+ Add Item
			</button>
			<br>
			<br>
		</div>
		<div class="row second-row">
				<div id="popUpFormRS" class="modal">
				  <div class="modal-background"></div>
				  <div class="modal-card">
				    <header class="modal-card-head">
				      <p class="modal-card-title">Add Details of road side item</p>
							<button onclick="document.getElementById('popUpFormRS').style.display='none'" class="delete" aria-label="close"></button>
						</header>
						<section class="modal-card-body">
							{{input "Item Name" "text" required=true placeHolder="put Item Name here."}}
							{{input "Item Price" "text" required=true placeHolder="put Item Price here."  isNum=true}}
							{{input "Item Description" "textarea"}}
							<lable class="b">Pin Location on Map</lable>
							<div id="map" class="fullwidth" ></div>
							<div id="current">Marker is Currently at: Current Lat: 44.974 Current Lng: -93.237</div>
							<script>
								var map;
						    function initializeMap() {
						      var map = new google.maps.Map(document.getElementById('map'), {
						          zoom: 14,
						          center: new google.maps.LatLng(44.974, -93.237),
						          mapTypeId: google.maps.MapTypeId.ROADMAP
						      });

						      var myMarker = new google.maps.Marker({
						          position: new google.maps.LatLng(44.974, -93.237),
						          draggable: true
						      });
						      google.maps.event.addListener(myMarker, 'dragend', function (evt) {
						          document.getElementById('current').innerHTML = '<p>Marker dropped: Current Lat: ' + evt.latLng.lat().toFixed(3) + ' Current Lng: ' + evt.latLng.lng().toFixed(3) + '</p>';
						      });

						      google.maps.event.addListener(myMarker, 'dragstart', function (evt) {
						          document.getElementById('current').innerHTML = '<p>Marker is Currently at: Current Lat: 44.974 Current Lng: -93.237</p>';
						      });

						      map.setCenter(myMarker.position);
						      myMarker.setMap(map);
						    }
							</script>
							<script async defer
							src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCHlhlAslc3THDNUBE7HZ18Q5brP_dk950&callback=initializeMap">
							</script>
						</section>
				    <footer class="modal-card-foot">
				      <button class="button is-success" onclick="proceed()">Save changes</button>
				      <button class="button" onclick="document.getElementById('popUpFormRS').style.display='none'">Cancel</button>
				    </footer>
			  	</div>
				</div>
					<div class="columns lgWrap">
								{{#each items}}
										<div class="column is-one-third lgColumn">
												<div class="card">
														<div class="card-image">
																<figure class="image is-4by3">
																		<img src="https://bulma.io/images/placeholders/1280x960.png" alt="Placeholder image">
																</figure>
														</div>
														<header class="card-header">
																<p class="card-header-title">
																		{{name}}
																</p>
																<a href="#" class="card-header-icon" aria-label="more options">
																	<span class="icon">
																		<i class="fa fa-angle-down" aria-hidden="true"></i>
																	</span>
																</a>
														</header>
														<div class="card-content">
																<div class="content">
																		{{description}}
																		<br>
																		<span class="location">{{location}}</span>
																</div>
														</div>
														{{#if loggedIn}}
																<footer class="card-footer">
																		{{#unless isUser}}
																				<a href="#" class="card-footer-item">Save</a>
																		{{/unless}}
																		{{#if isUser}}
																				<a href="#" class="card-footer-item">Delete</a>
																		{{/if}}
																</footer>
														{{/if}}
												</div>
										</div>
								{{/each}}
						</div>
				</div>
		
	</div>
</p>
